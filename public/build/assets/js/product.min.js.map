{"version":3,"sources":["product.js","product-ui.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"product.min.js","sourcesContent":["var app = app || {};\r\n\r\napp.product = new function() {\r\n\r\n    //---------- PRIVATE VARS ----------\r\n\r\n    var _this = this;\r\n\r\n    _this.create = function () {\r\n        $('#myModal').modal();\r\n        $('#myModal .modal-content').load(\"/product/create\");\r\n    };\r\n\r\n    _this.store = function () {\r\n\r\n        var data = $('#saveProduct').serialize();\r\n        $.ajax({\r\n            type: \"POST\",\r\n            dataType: \"JSON\",\r\n            url: \"/product/store\",\r\n            data: data,\r\n            success: function (data) {\r\n                $(data).appendTo($(\"#productList\"));\r\n                $('#myModal').modal('toggle');\r\n                //TODO growl something\r\n            },\r\n            error: function (data) {\r\n                //TODO use growl\r\n                alert(\"Something went wrong\");\r\n            }\r\n        });\r\n    };\r\n\r\n    _this.delete = function (e) {\r\n\r\n        var $target = $( e.target );\r\n        var $id = $target.data(\"id\")\r\n\r\n        $.ajax({\r\n            type: \"POST\",\r\n            dataType: \"JSON\",\r\n            url: \"/product/delete\",\r\n            data: {id:$id},\r\n            success: function (data) {\r\n                var $tr = $target.closest('tr');\r\n                $tr.remove();\r\n                //TODO growl something\r\n            },\r\n            error: function (data) {\r\n                //TODO use growl\r\n                alert(\"Something went wrong\");\r\n            }\r\n        });\r\n    };\r\n\r\n    _this.edit = function (e) {\r\n        var $target = $( e.target );\r\n        var $id = $target.data(\"id\")\r\n\r\n        $('#myModal').modal();\r\n        $('#myModal .modal-content').load(\"/product/edit/\"+$id);\r\n    };\r\n\r\n    _this.update = function () {\r\n\r\n        var data = $('#editProduct').serialize();\r\n        $.ajax({\r\n            type: \"POST\",\r\n            dataType: \"JSON\",\r\n            url: \"/product/update\",\r\n            data: data,\r\n            success: function (data) {\r\n                var $target = $(\"tr\").find(\".edit[data-id='\" + data[\"id\"] + \"']\");\r\n                var $tr = $target.closest('tr');\r\n                $tr.replaceWith(data[\"view\"]);\r\n                $('#myModal').modal('toggle');\r\n                //TODO growl something\r\n            },\r\n            error: function (data) {\r\n                //TODO use growl\r\n                alert(\"Something went wrong\");\r\n            }\r\n        });\r\n    };\r\n};","$(function(){\r\n\r\n    $(\".addProduct\").click(function(e){\r\n        e.preventDefault();\r\n        app.product.create();\r\n    });\r\n\r\n    //btn-save no existe cuando cargamos la pagina por lo que tenemos que hacer el listening en un elemento que exista\r\n    $(\"#myModal\").on('click', '.btn-save', function(e)\r\n    {\r\n        e.preventDefault();\r\n        app.product.store();\r\n    });\r\n\r\n    $(\"#productList\").on('click', '.delete', function(e)\r\n    {\r\n        e.preventDefault();\r\n        app.product.delete(e);\r\n    });\r\n\r\n    $(\"#productList\").on('click', '.edit', function(e)\r\n    {\r\n        e.preventDefault();\r\n        app.product.edit(e);\r\n    });\r\n\r\n    $(\"#myModal\").on('click', '.btn-edit', function(e)\r\n    {\r\n        e.preventDefault();\r\n        app.product.update();\r\n    });\r\n\r\n});"]}