{"version":3,"sources":["client.js","client-ui.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"client.min.js","sourcesContent":["var app = app || {};\r\n\r\napp.client = new function() {\r\n\r\n    var _this = this;\r\n\r\n    _this.create = function(){\r\n        $('#myModal').modal();\r\n        $('#myModal .modal-content').load(\"/client/create\");\r\n    };\r\n\r\n    _this.store = function () {\r\n\r\n        var data = $('#saveClient').serialize();\r\n        var $request = $.ajax({\r\n            type: \"POST\",\r\n            dataType: \"JSON\",\r\n            url: \"/client/store\",\r\n            data: data\r\n        });\r\n\r\n        $request.done(function (data) {\r\n            console.log(data);\r\n            $(data).appendTo($(\"#clientList\"));\r\n            $('#myModal').modal('toggle');\r\n            //TODO growl something\r\n        });\r\n\r\n        $request.fail(function (data) {\r\n            //TODO use growl\r\n            console.log(\"Something went wrong\");\r\n        })\r\n    };\r\n\r\n    _this.delete = function (e) {\r\n\r\n        var $target = $( e.target );\r\n        var $id = $target.data(\"id\");\r\n\r\n        var $request = $.ajax({\r\n            type: \"POST\",\r\n            dataType: \"JSON\",\r\n            url: \"/client/delete\",\r\n            data: {id:$id}\r\n        });\r\n\r\n        $request.done(function (data) {\r\n            var $tr = $target.closest('tr');\r\n            $tr.remove();\r\n            //TODO growl something\r\n        });\r\n\r\n        $request.error(function (data) {\r\n            //TODO use growl\r\n            alert(\"Something went wrong\");\r\n        });\r\n    };\r\n\r\n    _this.edit = function (e) {\r\n        var $target = $( e.target );\r\n        var $id = $target.data(\"id\");\r\n\r\n        $('#myModal').modal();\r\n        $('#myModal .modal-content').load(\"/client/edit/\"+$id);\r\n    };\r\n\r\n    _this.update = function () {\r\n\r\n        var data = $('#editClient').serialize();\r\n        var $request = $.ajax({\r\n            type: \"POST\",\r\n            dataType: \"JSON\",\r\n            url: \"/client/update\",\r\n            data: data\r\n        });\r\n\r\n        $request.done(function (data) {\r\n            var $target = $(\"tr\").find(\".edit[data-id='\" + data[\"id\"] + \"']\");\r\n            var $tr = $target.closest('tr');\r\n            $tr.replaceWith(data[\"view\"]);\r\n            $('#myModal').modal('toggle');\r\n            //TODO growl something\r\n        });\r\n\r\n        $request.fail(function (data) {\r\n                //TODO use growl\r\n                alert(\"Something went wrong\");\r\n            }\r\n        );\r\n    };\r\n};","$(function(){\r\n    $(\".addClient\").click(function(e){\r\n        e.preventDefault();\r\n        console.log(\"add client\");\r\n        app.client.create();\r\n    });\r\n\r\n    //btn-save no existe cuando cargamos la pagina por lo que tenemos que hacer el listening en un elemento que exista\r\n    $(\"#myModal\").on('click', '.btn-save', function(e)\r\n    {\r\n        e.preventDefault();\r\n        app.client.store();\r\n    });\r\n\r\n    $(\"#clientList\").on('click', '.delete', function(e)\r\n    {\r\n        e.preventDefault();\r\n        app.client.delete(e);\r\n    });\r\n\r\n    $(\"#clientList\").on('click', '.edit', function(e)\r\n    {\r\n        e.preventDefault();\r\n        app.client.edit(e);\r\n    });\r\n\r\n    $(\"#myModal\").on('click', '.btn-edit', function(e)\r\n    {\r\n        e.preventDefault();\r\n        app.client.update();\r\n    });\r\n});"]}